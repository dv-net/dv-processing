// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: processing_wallets_gen.sql

package repo_wallets_processing

import (
	"context"

	"github.com/dv-net/dv-processing/internal/models"
	"github.com/dv-net/dv-processing/pkg/walletsdk/wconstants"
	"github.com/google/uuid"
)

const create = `-- name: Create :one
INSERT INTO processing_wallets (blockchain, address, owner_id, sequence, is_active, created_at)
	VALUES ($1, $2, $3, $4, $5, now())
	RETURNING id, blockchain, address, owner_id, sequence, is_active, is_dirty, created_at, updated_at
`

type CreateParams struct {
	Blockchain wconstants.BlockchainType `db:"blockchain" json:"blockchain" validate:"required"`
	Address    string                    `db:"address" json:"address" validate:"required"`
	OwnerID    uuid.UUID                 `db:"owner_id" json:"owner_id" validate:"required,uuid4"`
	Sequence   int32                     `db:"sequence" json:"sequence"`
	IsActive   bool                      `db:"is_active" json:"is_active"`
}

func (q *Queries) Create(ctx context.Context, arg CreateParams) (*models.ProcessingWallet, error) {
	row := q.db.QueryRow(ctx, create,
		arg.Blockchain,
		arg.Address,
		arg.OwnerID,
		arg.Sequence,
		arg.IsActive,
	)
	var i models.ProcessingWallet
	err := row.Scan(
		&i.ID,
		&i.Blockchain,
		&i.Address,
		&i.OwnerID,
		&i.Sequence,
		&i.IsActive,
		&i.IsDirty,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return &i, err
}
